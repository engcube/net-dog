#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
通用工具函数
"""

def is_china_ip(ip: str) -> bool:
    """检查是否为中国IP"""
    try:
        first_octet = int(ip.split('.')[0])
        china_ranges = [1, 14, 27, 36, 39, 42, 49, 58, 59, 60, 61, 
                       101, 103, 106, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 
                       175, 180, 182, 183, 202, 203, 210, 211, 218, 219, 220, 221, 222, 223]
        return first_octet in china_ranges
    except (ValueError, IndexError):
        return False


def get_country_name(country_code: str) -> str:
    """将国家代码转换为中文国家名称"""
    country_map = {
        # 主要亚洲国家
        'jp': '日本',
        'kr': '韩国',
        'sg': '新加坡',
        'hk': '香港',
        'tw': '台湾',
        'th': '泰国',
        'my': '马来西亚',
        'id': '印度尼西亚',
        'ph': '菲律宾',
        'vn': '越南',
        'in': '印度',
        
        # 主要欧洲国家
        'gb': '英国',
        'de': '德国',
        'fr': '法国',
        'nl': '荷兰',
        'it': '意大利',
        'es': '西班牙',
        'se': '瑞典',
        'no': '挪威',
        'fi': '芬兰',
        'dk': '丹麦',
        'ch': '瑞士',
        'at': '奥地利',
        'be': '比利时',
        'ie': '爱尔兰',
        'pt': '葡萄牙',
        'ru': '俄罗斯',
        'ua': '乌克兰',
        'pl': '波兰',
        'cz': '捷克',
        'hu': '匈牙利',
        'ro': '罗马尼亚',
        'bg': '保加利亚',
        'hr': '克罗地亚',
        'rs': '塞尔维亚',
        'gr': '希腊',
        'tr': '土耳其',
        
        # 主要美洲国家
        'us': '美国',
        'ca': '加拿大',
        'mx': '墨西哥',
        'br': '巴西',
        'ar': '阿根廷',
        'cl': '智利',
        'co': '哥伦比亚',
        'pe': '秘鲁',
        've': '委内瑞拉',
        
        # 主要大洋洲国家
        'au': '澳大利亚',
        'nz': '新西兰',
        
        # 主要非洲国家
        'za': '南非',
        'eg': '埃及',
        'ng': '尼日利亚',
        'ke': '肯尼亚',
        'ma': '摩洛哥',
        
        # 主要中东国家
        'ae': '阿联酋',
        'sa': '沙特阿拉伯',
        'il': '以色列',
        'ir': '伊朗',
        'iq': '伊拉克',
        'jo': '约旦',
        'lb': '黎巴嫩',
        'sy': '叙利亚',
        'kw': '科威特',
        'qa': '卡塔尔',
        'bh': '巴林',
        'om': '阿曼',
        'ye': '也门',
        
        # 中国相关
        'cn': '中国',
        'mo': '澳门',
        
        # 其他常见
        'ad': '安道尔',
        'is': '冰岛',
        'lu': '卢森堡',
        'mc': '摩纳哥',
        'va': '梵蒂冈',
        'sm': '圣马力诺',
        'li': '列支敦士登',
        'mt': '马耳他',
        'cy': '塞浦路斯',
    }
    
    return country_map.get(country_code.lower(), f'未知地区({country_code.upper()})')